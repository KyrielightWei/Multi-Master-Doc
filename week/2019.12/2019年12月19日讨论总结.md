>时间：2019年12月19日 周四\
记录人：liu

# 本周工作内容
zhang

- IO 部分代码编写：读、写和打开文件已经完成，单元测试通过。其余代码已经完成，还未进行单元测试。

sun

- ycsb调研

> 参考：
[ycsb核心属性及工作负载类型](https://note.youdao.com/ynoteshare1/index.html?id=080d4497386093ca5752179c9fec09bf&type=note#/)

liu

- ceph的CRUSH深入了解

wei

- 集中式页的锁表的实现
- 网络库libevent再封装

# 讨论内容
- libevent问题：

1. 服务端不关，客户端这边关闭后重新连接再做一次操作就没什么反应。初步讨论可能是因为重新再连接一次端口以及自动分配的客户端id会变，而服务器那边还在监听上一个id。
2. 后期需要考虑libevent的client长时间不用的情况下连接会不会断开，可能需要做心跳监控客户端是否还在。
- 了解ycsb表结构以及负载的生成类型：

1. ycsb维护一张表，所有动作在一张表上做，其负载类型有abcdef六种。
1. 后期需要再去了解ycsb是怎么测试的，参数怎么调，以及实验的图表是什么样的等等。

- CRUSH讨论：简言之即```file->split to object->Hash(object id)->PGs->CRUSH->OSDs```，CRUSH是一个为了解决实际多副本涉及安全需求的数据排布算法。讨论过后认为用一致性哈希也可以实现我们的需求。

- libevent的再封装：

1. 增加了两个配置文件：主机地址的配置，消息组的配置。消息组的作用在于说明消息的类型以及连接对象，为每个消息组开启相应的线程来处理，实现并行处理。
2. 消息处理的接口的改进：
初始化时需要加上上述配置文件的路径；
增加了收到不同消息组的回调函数。后期还会加一至两个接口，用来查看收到了多少信息，缓冲区内是否还有信息，以及有哪些数据还未处理。

# 下周工作计划

zhang

- 对剩余IO函数做单元测试，调试

sun

- 学习ycsb实验怎么做，学习设计实验

liu

- ceph动态子树分割

wei

- 集中式页的锁表